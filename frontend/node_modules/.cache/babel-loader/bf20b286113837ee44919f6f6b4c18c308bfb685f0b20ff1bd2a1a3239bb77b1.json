{"ast":null,"code":"var _jsxFileName = \"/Users/tejas.shah/Downloads/jsmcrsvp/frontend/src/components/Home.js\",\n  _s = $RefreshSig$();\n// frontend/src/components/Home.js\nimport React, { useEffect, useState } from \"react\";\nimport { getOpenEvents, searchMember, submitRSVP, verifyRSVP, updateRSVP } from \"../api\";\nimport \"../styles/SubmitRSVP.css\";\nimport logo from \"../assets/JSMCLogo.jpg\";\n\n// IMPORTANT: adjust these imports if your files are located somewhere else\nimport MemberRSVP from \"./MemberRSVP\";\nimport NonMemberRSVP from \"./NonMemberRSVP\";\nimport VerifyRSVP from \"./VerifyRSVP\";\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default function Home() {\n  _s();\n  const [activeTab, setActiveTab] = useState(\"home\"); // \"home\" | \"submit\" | \"verify\"\n\n  // Shared\n  const [events, setEvents] = useState([]);\n  const [error, setError] = useState(\"\");\n\n  // Submit states\n  const [isLifeMember, setIsLifeMember] = useState(null);\n  const [searchMode, setSearchMode] = useState(\"\");\n  const [memberId, setMemberId] = useState(\"\");\n  const [name, setName] = useState(\"\");\n  const [houseNumber, setHouseNumber] = useState(\"\");\n  const [member, setMember] = useState(null);\n  const [selectedEvents, setSelectedEvents] = useState({}); // { idx: count/flag }\n  const [email, setEmail] = useState(\"\");\n  const [rsvpCount, setRsvpCount] = useState(\"\"); // RSVP count (single field as in your code)\n  const [confirmation, setConfirmation] = useState(null);\n  const [loadingEvents, setLoadingEvents] = useState(true);\n  const [searching, setSearching] = useState(false);\n  const [submitting, setSubmitting] = useState(false);\n\n  // Submit messaging / success\n  const [submitMessage, setSubmitMessage] = useState(null);\n  const [submitSuccess, setSubmitSuccess] = useState(false);\n\n  // Verify states\n  const [verifyConfNumber, setVerifyConfNumber] = useState(\"\");\n  const [verifyResult, setVerifyResult] = useState({\n    rsvps: []\n  }); // always an object with rsvps array\n  const [verifying, setVerifying] = useState(false);\n\n  // Modify RSVP\n  const [editIndex, setEditIndex] = useState(null);\n  const [modifiedCount, setModifiedCount] = useState(\"\");\n  const [updateMessage, setUpdateMessage] = useState(null);\n  const [updateError, setUpdateError] = useState(null);\n\n  // Non-member fields\n  const [nonMemberName, setNonMemberName] = useState(\"\");\n  const [nonMemberAddress, setNonMemberAddress] = useState(\"\");\n  const [nonMemberPhone, setNonMemberPhone] = useState(\"\");\n  const [nonMemberEmail, setNonMemberEmail] = useState(\"\");\n\n  // ---------------- New: shared reset function ----------------\n  const resetAll = () => {\n    // Submit side\n    setIsLifeMember(null);\n    setSearchMode(\"\");\n    setMemberId(\"\");\n    setName(\"\");\n    setHouseNumber(\"\");\n    setMember(null);\n    setSelectedEvents({});\n    setEmail(\"\");\n    setRsvpCount(\"\");\n    setConfirmation(null);\n    setSubmitMessage(null);\n    setSubmitSuccess(false);\n    setError(\"\");\n    setSearching(false);\n    setSubmitting(false);\n\n    // Verify side\n    setVerifyConfNumber(\"\");\n    setVerifyResult({\n      rsvps: []\n    });\n    setVerifying(false);\n    setEditIndex(null);\n    setModifiedCount(\"\");\n    setUpdateMessage(null);\n    setUpdateError(null);\n  };\n  const handleTabChange = tab => {\n    if (tab === \"home\") {\n      resetAll();\n    }\n    setActiveTab(tab);\n  };\n  // ------------------------------------------------------------\n\n  // Load open events once\n  useEffect(() => {\n    (async () => {\n      setLoadingEvents(true);\n      try {\n        console.log(\"Loading open events...\");\n        const data = await getOpenEvents();\n        setEvents(Array.isArray(data) ? data : []);\n        console.log(\"Open events loaded:\", Array.isArray(data) ? data.length : 0);\n      } catch (err) {\n        console.error(\"Failed to load open events:\", err);\n        setError(\"Failed to load open events.\");\n      } finally {\n        setLoadingEvents(false);\n      }\n    })();\n  }, []);\n\n  // -------- Submit handlers --------\n  const handleSearch = async e => {\n    e.preventDefault();\n    setError(\"\");\n    setMember(null);\n    if (searchMode !== \"memberId\" && searchMode !== \"nameHouse\") {\n      setError(\"Choose a search mode first.\");\n      return;\n    }\n    if (searchMode === \"memberId\" && !memberId.trim()) {\n      setError(\"Member ID is required.\");\n      return;\n    }\n    if (searchMode === \"nameHouse\" && (!name.trim() || !houseNumber.trim())) {\n      setError(\"Name and House # are required.\");\n      return;\n    }\n    setSearching(true);\n    try {\n      const payload = searchMode === \"memberId\" ? {\n        memberId: memberId.trim()\n      } : {\n        name: name.trim(),\n        houseNumber: houseNumber.trim()\n      };\n      console.log(\"Searching member with payload:\", payload);\n      const result = await searchMember(payload);\n      console.log(\"Search result:\", result);\n      if (result && result.name) {\n        setMember(result);\n      } else {\n        setError(\"Member not found.\");\n      }\n    } catch (err) {\n      console.error(\"Error searching member:\", err);\n      setError(err.message || \"Error searching member.\");\n    } finally {\n      setSearching(false);\n    }\n  };\n  const toggleEventSelection = (eventId, checked) => {\n    setSelectedEvents(prev => {\n      var _copy$eventId;\n      const copy = {\n        ...prev\n      };\n      if (checked) copy[eventId] = (_copy$eventId = copy[eventId]) !== null && _copy$eventId !== void 0 ? _copy$eventId : 1;else delete copy[eventId];\n      return copy;\n    });\n  };\n  const updateEventCount = (eventId, value) => {\n    setSelectedEvents(prev => ({\n      ...prev,\n      [eventId]: value ? parseInt(value, 10) : 0\n    }));\n  };\n  const hasValidSelection = () => {\n    // at least one event selected & count > 0 (you already used this rule)\n    return Object.keys(selectedEvents).some(k => {\n      const v = Number(selectedEvents[k] || rsvpCount);\n      return !isNaN(v) && v > 0;\n    });\n  };\n  const handleSubmitRSVP = async e => {\n    e.preventDefault();\n    setError(\"\");\n    setConfirmation(null);\n    setSubmitMessage(null);\n\n    // Validation\n    if (isLifeMember === \"yes\" && !member) {\n      setError(\"Please search and select a member first.\");\n      return;\n    }\n    if (!hasValidSelection()) {\n      setError(\"Please select at least one event and give it an RSVP count (>0).\");\n      return;\n    }\n\n    // Non-member email check\n    if (isLifeMember === \"no\" && !nonMemberEmail.trim()) {\n      setError(\"Please enter an email address.\");\n      return;\n    }\n\n    // Member email check\n    if (isLifeMember === \"yes\" && !email.trim()) {\n      setError(\"Please enter an email address.\");\n      return;\n    }\n    const confNumber = Math.floor(100000 + Math.random() * 900000).toString();\n\n    // Build events array\n    const eventsPayload = events.map((ev, idx) => selectedEvents[idx] !== undefined && Number(rsvpCount) >= 0 ? {\n      programname: ev.programname,\n      eventname: ev.eventname,\n      eventday: ev.eventday,\n      eventdate: ev.eventdate,\n      rsvpcount: Number(rsvpCount)\n    } : null).filter(Boolean);\n\n    // Pick correct fields depending on member vs non-member\n    const payload = isLifeMember === \"yes\" ? {\n      memname: (member === null || member === void 0 ? void 0 : member.name) || \"\",\n      memaddress: (member === null || member === void 0 ? void 0 : member.address) || \"\",\n      memphonenumber: (member === null || member === void 0 ? void 0 : member.phone) || \"\",\n      mememail: email.trim(),\n      rsvpconfnumber: confNumber,\n      events: eventsPayload\n    } : {\n      memname: nonMemberName,\n      memaddress: nonMemberAddress,\n      memphonenumber: nonMemberPhone,\n      mememail: nonMemberEmail.trim(),\n      rsvpconfnumber: confNumber,\n      events: eventsPayload\n    };\n    console.log(\"Submitting RSVP Payload:\", payload);\n    setSubmitting(true);\n    try {\n      const res = await submitRSVP(payload);\n      console.log(\"Submit response:\", res);\n      setConfirmation({\n        confNumber,\n        ...res\n      });\n      setSubmitMessage(\"RSVP submitted successfully!\");\n      setSubmitSuccess(true);\n\n      // Reset after delay\n      setTimeout(() => {\n        setSubmitMessage(null);\n        setSubmitSuccess(false);\n        setConfirmation(null);\n        setMember(null);\n        setSelectedEvents({});\n        setEmail(\"\");\n        setNonMemberName(\"\");\n        setNonMemberAddress(\"\");\n        setNonMemberPhone(\"\");\n        setNonMemberEmail(\"\");\n        setIsLifeMember(null);\n        setSearchMode(\"\");\n        setMemberId(\"\");\n        setName(\"\");\n        setHouseNumber(\"\");\n        setRsvpCount(\"\");\n        setActiveTab(\"home\");\n      }, 15000);\n    } catch (err) {\n      console.error(\"Error submitting RSVP:\", err);\n      setSubmitMessage(\"Error submitting RSVP: \" + (err.message || \"Unknown\"));\n      setSubmitSuccess(false);\n    } finally {\n      setSubmitting(false);\n    }\n  };\n\n  // =========== Working 091425 =======12:30am ==========\n  const WorkinghandleSubmitRSVP = async e => {\n    e.preventDefault();\n    setError(\"\");\n    setConfirmation(null);\n    setSubmitMessage(null);\n\n    // If non-member workflow, member may be null but we still want to use the manual fields.\n    // Your request was to keep variable names; so the NonMemberRSVP component should set `member` or we will\n    // send the manual fields as memname/memaddress/etc in payload. For the member flow below, member is required.\n    if (isLifeMember === \"yes\" && !member) {\n      setError(\"Please search and select a member first.\");\n      return;\n    }\n    if (!hasValidSelection()) {\n      setError(\"Please select at least one event and give it an RSVP count (>0).\");\n      return;\n    }\n    if (!email.trim()) {\n      setError(\"Please enter an email address.\");\n      return;\n    }\n    const confNumber = Math.floor(100000 + Math.random() * 900000).toString();\n\n    // Build events array using selectedEvents (same behavior as before)\n    const eventsPayload = events.map((ev, idx) => selectedEvents[idx] !== undefined && Number(rsvpCount) >= 0 ? {\n      programname: ev.programname,\n      eventname: ev.eventname,\n      eventday: ev.eventday,\n      eventdate: ev.eventdate,\n      rsvpcount: Number(rsvpCount)\n    } : null).filter(Boolean);\n\n    // If member flow, use member fields; if non-member flow, we expect NonMemberRSVP to set `member` object\n    // or provide manual fields via top-level variables. To keep compatibility, we prefer:\n    // - if member exists -> use member fields\n    // - else expect manual fields are in name/houseNumber/email etc and use them\n    const memName = member ? member.name : name;\n    const memAddress = member ? member.address : houseNumber; // if you store address in a different var, adjust accordingly\n    const memPhone = member ? member.phone : \"\"; // NonMemberRSVP should set a top-level state for phone if needed\n\n    // Build unified payload\n    const payload = {\n      memname: memName,\n      memaddress: memAddress,\n      memphonenumber: memPhone,\n      mememail: email.trim(),\n      rsvpconfnumber: confNumber,\n      events: eventsPayload\n    };\n    console.log(\"Submitting RSVP Payload:\", payload);\n    setSubmitting(true);\n    try {\n      const res = await submitRSVP(payload);\n      console.log(\"Submit response:\", res);\n      setConfirmation({\n        confNumber,\n        ...res\n      });\n      setSubmitMessage(\"RSVP submitted successfully!\");\n      setSubmitSuccess(true);\n\n      // keep success message visible then clear (as you requested previously)\n      setTimeout(() => {\n        // Reset all submit tab states\n        setSubmitMessage(null);\n        setSubmitSuccess(false);\n        setConfirmation(null);\n        setMember(null);\n        setSelectedEvents({});\n        setEmail(\"\");\n        setIsLifeMember(null);\n        setSearchMode(\"\");\n        setMemberId(\"\");\n        setName(\"\");\n        setHouseNumber(\"\");\n        setRsvpCount(\"\");\n\n        // Switch to Home\n        setActiveTab(\"home\");\n      }, 15000);\n    } catch (err) {\n      console.error(\"Error submitting RSVP:\", err);\n      setSubmitMessage(\"Error submitting RSVP: \" + (err.message || \"Unknown\"));\n      setSubmitSuccess(false);\n    } finally {\n      setSubmitting(false);\n    }\n  };\n\n  // -------- Verify handlers --------\n  const handleVerifyRSVP = async e => {\n    if (e && e.preventDefault) e.preventDefault();\n    setError(\"\");\n    setVerifyResult({\n      rsvps: []\n    });\n    setUpdateMessage(null);\n    setUpdateError(null);\n    if (!verifyConfNumber.trim()) {\n      setError(\"Confirmation number is required.\");\n      return;\n    }\n    setVerifying(true);\n    try {\n      console.log(\"Calling verifyRSVP for:\", verifyConfNumber.trim());\n      const data = await verifyRSVP(verifyConfNumber.trim());\n      console.log(\"Verify response:\", data);\n      // normalize shape: ensure object with rsvps array\n      const normalized = data && Array.isArray(data.rsvps) ? data : {\n        rsvps: []\n      };\n      setVerifyResult(normalized);\n    } catch (err) {\n      var _err$response, _err$response$data;\n      console.error(\"Error verifying RSVP:\", err);\n      setError(((_err$response = err.response) === null || _err$response === void 0 ? void 0 : (_err$response$data = _err$response.data) === null || _err$response$data === void 0 ? void 0 : _err$response$data.message) || err.message || \"Error verifying RSVP.\");\n    } finally {\n      setVerifying(false);\n      setEditIndex(null);\n      setModifiedCount(\"\");\n    }\n  };\n  const handleUpdateRSVP = async (rsvpId, newCount) => {\n    try {\n      console.log(\"🔧 Sending update for RSVP:\", rsvpId, \"→\", newCount);\n      const result = await updateRSVP(rsvpId, parseInt(newCount, 10));\n      console.log(\"✅ RSVP updated:\", result);\n      const successMsg = \"RSVP updated successfully!\";\n\n      // Refresh verify results\n      await handleVerifyRSVP({\n        preventDefault: () => {}\n      });\n      setEditIndex(null);\n\n      // Show success AFTER refresh\n      setUpdateMessage(successMsg);\n      setUpdateError(null);\n\n      // After 15s clear everything and return to Home\n      setTimeout(() => {\n        setVerifyConfNumber(\"\");\n        setVerifyResult({\n          rsvps: []\n        });\n        setEditIndex(null);\n        setModifiedCount(\"\");\n        setUpdateMessage(null);\n        setActiveTab(\"home\");\n      }, 15000);\n    } catch (err) {\n      console.error(\"❌ Error updating RSVP:\", err);\n      setUpdateError(err.message || \"Error updating RSVP.\");\n      setUpdateMessage(null);\n      setTimeout(() => setUpdateError(null), 5000);\n    }\n  };\n\n  // Helper to extract member info from verifyResult.rsvps (first doc)\n  const verifyMemberFromResult = () => {\n    var _verifyResult$rsvps;\n    const arr = (_verifyResult$rsvps = verifyResult === null || verifyResult === void 0 ? void 0 : verifyResult.rsvps) !== null && _verifyResult$rsvps !== void 0 ? _verifyResult$rsvps : [];\n    if (!Array.isArray(arr) || arr.length === 0) return null;\n    const first = arr[0];\n    return {\n      name: first.memname || \"\",\n      address: first.memaddress || \"\",\n      phone: first.memphonenumber || \"\",\n      email: first.mememail || \"\"\n    };\n  };\n\n  // Utility to format YYYY-MM-DD → MM/DD/YYYY\n  const displayDate = dateStr => {\n    if (!dateStr) return \"\";\n    const [year, month, day] = dateStr.split(\"-\");\n    return `${month}/${day}/${year}`;\n  };\n\n  // -------- UI --------\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"page-wrapper\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"rsvp-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"logo-wrapper\",\n        children: /*#__PURE__*/_jsxDEV(\"img\", {\n          src: logo,\n          alt: \"JSMC Logo\",\n          className: \"rsvp-logo\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 474,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 473,\n        columnNumber: 9\n      }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"error-message\",\n        children: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 476,\n        columnNumber: 19\n      }, this), activeTab === \"home\" && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"home\",\n        children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n          children: \"Welcome to JSMC RSVP Home\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 480,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"result-table-wrapper\",\n          style: {\n            marginTop: \"10px\"\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n            children: \"Current open events to Submit or View/Modify RSVP\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 484,\n            columnNumber: 15\n          }, this), Array.isArray(events) && events.length > 0 ? /*#__PURE__*/_jsxDEV(\"table\", {\n            className: \"result-table\",\n            style: {\n              marginBottom: \"20px\"\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n              children: /*#__PURE__*/_jsxDEV(\"tr\", {\n                children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                  children: \"Program\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 490,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  children: \"Event Name\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 491,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  children: \"Event Date\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 492,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  children: \"RSVP By\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 493,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 489,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 488,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n              children: events.map((ev, idx) => {\n                // Check if this is the first event for this program\n                const isFirst = idx === 0 || ev.programname !== events[idx - 1].programname;\n                // Count how many events belong to this program\n                const programCount = events.filter(e => e.programname === ev.programname).length;\n                return /*#__PURE__*/_jsxDEV(\"tr\", {\n                  children: [isFirst && /*#__PURE__*/_jsxDEV(\"td\", {\n                    rowSpan: programCount,\n                    children: ev.programname\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 505,\n                    columnNumber: 39\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    children: ev.eventname\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 506,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    children: [ev.eventday, \", \", displayDate(ev.eventdate)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 507,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    children: displayDate(ev.closersvp)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 508,\n                    columnNumber: 27\n                  }, this)]\n                }, ev._id || idx, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 504,\n                  columnNumber: 25\n                }, this);\n              })\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 496,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 487,\n            columnNumber: 17\n          }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n            style: {\n              fontStyle: \"italic\",\n              color: \"#666\"\n            },\n            children: \"No open events available at this time.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 515,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 483,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n          children: \"Please select Submit RSVP or Verify/Modify RSVP\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 521,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 479,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"tab-header\",\n        children: [activeTab !== \"home\" && /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"tab\",\n          onClick: () => handleTabChange(\"home\"),\n          children: \"Home\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 528,\n          columnNumber: 13\n        }, this), activeTab !== \"submit\" && /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"tab\",\n          onClick: () => handleTabChange(\"submit\"),\n          children: \"Submit RSVP\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 533,\n          columnNumber: 13\n        }, this), activeTab !== \"verify\" && /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"tab\",\n          onClick: () => handleTabChange(\"verify\"),\n          children: \"Verify / Modify RSVP\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 538,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 526,\n        columnNumber: 9\n      }, this), activeTab === \"submit\" && /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [isLifeMember === null && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-section\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            children: \"Are you JSMC Life Member?\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 562,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"radio\",\n              name: \"lifeMember\",\n              value: \"yes\",\n              onChange: () => setIsLifeMember(\"yes\")\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 564,\n              columnNumber: 19\n            }, this), \" Yes\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 563,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n            style: {\n              marginLeft: \"1rem\"\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"radio\",\n              name: \"lifeMember\",\n              value: \"no\",\n              onChange: () => setIsLifeMember(\"no\")\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 567,\n              columnNumber: 19\n            }, this), \" No\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 566,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 561,\n          columnNumber: 15\n        }, this), isLifeMember === \"no\" && /*#__PURE__*/_jsxDEV(NonMemberRSVP, {\n          events: events,\n          displayDate: displayDate,\n          toggleEventSelection: toggleEventSelection,\n          selectedEvents: selectedEvents,\n          rsvpCount: rsvpCount,\n          setRsvpCount: setRsvpCount,\n          nonMemberName: nonMemberName,\n          setNonMemberName: setNonMemberName,\n          nonMemberAddress: nonMemberAddress,\n          setNonMemberAddress: setNonMemberAddress,\n          nonMemberPhone: nonMemberPhone,\n          setNonMemberPhone: setNonMemberPhone,\n          nonMemberEmail: nonMemberEmail,\n          setNonMemberEmail: setNonMemberEmail,\n          handleSubmitRSVP: handleSubmitRSVP,\n          submitting: submitting\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 574,\n          columnNumber: 15\n        }, this), isLifeMember === \"yes\" && !member && /*#__PURE__*/_jsxDEV(\"form\", {\n          className: \"search-form\",\n          onSubmit: handleSearch,\n          children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n            children: \"Retrieve membership using\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 597,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-row\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"radio\",\n                value: \"memberId\",\n                checked: searchMode === \"memberId\",\n                onChange: () => setSearchMode(\"memberId\")\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 601,\n                columnNumber: 21\n              }, this), \"Member ID\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 600,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n              style: {\n                marginLeft: \"1rem\"\n              },\n              children: \" OR \"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 609,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n              style: {\n                marginLeft: \"1rem\"\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"radio\",\n                value: \"nameHouse\",\n                checked: searchMode === \"nameHouse\",\n                onChange: () => setSearchMode(\"nameHouse\")\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 611,\n                columnNumber: 21\n              }, this), \"First Name & House #\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 610,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 599,\n            columnNumber: 17\n          }, this), searchMode === \"memberId\" && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"inline-fields\",\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              className: \"small-input\",\n              type: \"number\",\n              value: memberId,\n              onChange: e => setMemberId(e.target.value),\n              placeholder: \"Enter Member ID\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 624,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"button\",\n              type: \"submit\",\n              disabled: searching || memberId.trim() === \"\",\n              style: {\n                backgroundColor: searching || memberId.trim() === \"\" ? \"lightgray\" : \"#007bff\",\n                color: searching || memberId.trim() === \"\" ? \"#666\" : \"white\",\n                cursor: searching || memberId.trim() === \"\" ? \"not-allowed\" : \"pointer\"\n              },\n              children: searching ? \"Searching...\" : \"Search\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 631,\n              columnNumber: 21\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 623,\n            columnNumber: 19\n          }, this), searchMode === \"nameHouse\" && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"inline-fields\",\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              className: \"small-input\",\n              type: \"text\",\n              value: name,\n              onChange: e => setName(e.target.value),\n              placeholder: \"First Name\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 651,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"inline-label\",\n              children: \"House #\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 658,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              className: \"small-input\",\n              type: \"text\",\n              value: houseNumber,\n              onChange: e => setHouseNumber(e.target.value),\n              placeholder: \"e.g. 123\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 659,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"button\",\n              type: \"submit\",\n              disabled: searching || name.trim() === \"\" || houseNumber.trim() === \"\",\n              style: {\n                backgroundColor: searching || name.trim() === \"\" || houseNumber.trim() === \"\" ? \"lightgray\" : \"#007bff\",\n                color: searching || name.trim() === \"\" || houseNumber.trim() === \"\" ? \"#666\" : \"white\",\n                cursor: searching || name.trim() === \"\" || houseNumber.trim() === \"\" ? \"not-allowed\" : \"pointer\"\n              },\n              children: searching ? \"Searching...\" : \"Search\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 666,\n              columnNumber: 21\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 650,\n            columnNumber: 19\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 596,\n          columnNumber: 15\n        }, this), member && /*#__PURE__*/_jsxDEV(MemberRSVP, {\n          events: events,\n          displayDate: displayDate,\n          toggleEventSelection: toggleEventSelection,\n          selectedEvents: selectedEvents,\n          rsvpCount: rsvpCount,\n          setRsvpCount: setRsvpCount,\n          email: email,\n          setEmail: setEmail,\n          member: member,\n          setMember: setMember,\n          handleSubmitRSVP: handleSubmitRSVP,\n          submitting: submitting,\n          submitMessage: submitMessage,\n          submitSuccess: submitSuccess\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 696,\n          columnNumber: 15\n        }, this), submitSuccess && submitMessage && /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            color: \"green\",\n            marginTop: \"10px\"\n          },\n          children: [\"\\u2705 \", submitMessage, confirmation && /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [\"Confirmation #: \", confirmation.confNumber || (confirmation === null || confirmation === void 0 ? void 0 : confirmation.confNumber)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 719,\n            columnNumber: 19\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 716,\n          columnNumber: 15\n        }, this), !submitSuccess && submitMessage && /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            color: \"red\",\n            marginTop: \"10px\"\n          },\n          children: [\"\\u274C \", submitMessage]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 725,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true), activeTab === \"verify\" && /*#__PURE__*/_jsxDEV(VerifyRSVP, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 733,\n        columnNumber: 36\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 471,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 470,\n    columnNumber: 5\n  }, this);\n}\n_s(Home, \"4yFccBVL/i7UH2LEFZbo87it8Z0=\");\n_c = Home;\nvar _c;\n$RefreshReg$(_c, \"Home\");","map":{"version":3,"names":["React","useEffect","useState","getOpenEvents","searchMember","submitRSVP","verifyRSVP","updateRSVP","logo","MemberRSVP","NonMemberRSVP","VerifyRSVP","jsxDEV","_jsxDEV","Fragment","_Fragment","Home","_s","activeTab","setActiveTab","events","setEvents","error","setError","isLifeMember","setIsLifeMember","searchMode","setSearchMode","memberId","setMemberId","name","setName","houseNumber","setHouseNumber","member","setMember","selectedEvents","setSelectedEvents","email","setEmail","rsvpCount","setRsvpCount","confirmation","setConfirmation","loadingEvents","setLoadingEvents","searching","setSearching","submitting","setSubmitting","submitMessage","setSubmitMessage","submitSuccess","setSubmitSuccess","verifyConfNumber","setVerifyConfNumber","verifyResult","setVerifyResult","rsvps","verifying","setVerifying","editIndex","setEditIndex","modifiedCount","setModifiedCount","updateMessage","setUpdateMessage","updateError","setUpdateError","nonMemberName","setNonMemberName","nonMemberAddress","setNonMemberAddress","nonMemberPhone","setNonMemberPhone","nonMemberEmail","setNonMemberEmail","resetAll","handleTabChange","tab","console","log","data","Array","isArray","length","err","handleSearch","e","preventDefault","trim","payload","result","message","toggleEventSelection","eventId","checked","prev","_copy$eventId","copy","updateEventCount","value","parseInt","hasValidSelection","Object","keys","some","k","v","Number","isNaN","handleSubmitRSVP","confNumber","Math","floor","random","toString","eventsPayload","map","ev","idx","undefined","programname","eventname","eventday","eventdate","rsvpcount","filter","Boolean","memname","memaddress","address","memphonenumber","phone","mememail","rsvpconfnumber","res","setTimeout","WorkinghandleSubmitRSVP","memName","memAddress","memPhone","handleVerifyRSVP","normalized","_err$response","_err$response$data","response","handleUpdateRSVP","rsvpId","newCount","successMsg","verifyMemberFromResult","_verifyResult$rsvps","arr","first","displayDate","dateStr","year","month","day","split","className","children","src","alt","fileName","_jsxFileName","lineNumber","columnNumber","style","marginTop","marginBottom","isFirst","programCount","rowSpan","closersvp","_id","fontStyle","color","onClick","type","onChange","marginLeft","onSubmit","target","placeholder","disabled","backgroundColor","cursor","_c","$RefreshReg$"],"sources":["/Users/tejas.shah/Downloads/jsmcrsvp/frontend/src/components/Home.js"],"sourcesContent":["// frontend/src/components/Home.js\nimport React, { useEffect, useState } from \"react\";\nimport {\n  getOpenEvents,\n  searchMember,\n  submitRSVP,\n  verifyRSVP,\n  updateRSVP,\n} from \"../api\";\nimport \"../styles/SubmitRSVP.css\";\nimport logo from \"../assets/JSMCLogo.jpg\";\n\n// IMPORTANT: adjust these imports if your files are located somewhere else\nimport MemberRSVP from \"./MemberRSVP\";\nimport NonMemberRSVP from \"./NonMemberRSVP\";\nimport VerifyRSVP from \"./VerifyRSVP\";\n\n\nexport default function Home() {\n  const [activeTab, setActiveTab] = useState(\"home\"); // \"home\" | \"submit\" | \"verify\"\n\n  // Shared\n  const [events, setEvents] = useState([]);\n  const [error, setError] = useState(\"\");\n\n  // Submit states\n  const [isLifeMember, setIsLifeMember] = useState(null);\n  const [searchMode, setSearchMode] = useState(\"\");\n  const [memberId, setMemberId] = useState(\"\");\n  const [name, setName] = useState(\"\");\n  const [houseNumber, setHouseNumber] = useState(\"\");\n  const [member, setMember] = useState(null);\n\n  const [selectedEvents, setSelectedEvents] = useState({}); // { idx: count/flag }\n  const [email, setEmail] = useState(\"\");\n  const [rsvpCount, setRsvpCount] = useState(\"\"); // RSVP count (single field as in your code)\n  const [confirmation, setConfirmation] = useState(null);\n\n  const [loadingEvents, setLoadingEvents] = useState(true);\n  const [searching, setSearching] = useState(false);\n  const [submitting, setSubmitting] = useState(false);\n\n  // Submit messaging / success\n  const [submitMessage, setSubmitMessage] = useState(null);\n  const [submitSuccess, setSubmitSuccess] = useState(false);\n\n  // Verify states\n  const [verifyConfNumber, setVerifyConfNumber] = useState(\"\");\n  const [verifyResult, setVerifyResult] = useState({ rsvps: [] }); // always an object with rsvps array\n  const [verifying, setVerifying] = useState(false);\n\n  // Modify RSVP\n  const [editIndex, setEditIndex] = useState(null);\n  const [modifiedCount, setModifiedCount] = useState(\"\");\n  const [updateMessage, setUpdateMessage] = useState(null);\n  const [updateError, setUpdateError] = useState(null);\n\n  // Non-member fields\n  const [nonMemberName, setNonMemberName] = useState(\"\");\n  const [nonMemberAddress, setNonMemberAddress] = useState(\"\");\n  const [nonMemberPhone, setNonMemberPhone] = useState(\"\");\n  const [nonMemberEmail, setNonMemberEmail] = useState(\"\");\n\n  // ---------------- New: shared reset function ----------------\n  const resetAll = () => {\n    // Submit side\n    setIsLifeMember(null);\n    setSearchMode(\"\");\n    setMemberId(\"\");\n    setName(\"\");\n    setHouseNumber(\"\");\n    setMember(null);\n    setSelectedEvents({});\n    setEmail(\"\");\n    setRsvpCount(\"\");\n    setConfirmation(null);\n    setSubmitMessage(null);\n    setSubmitSuccess(false);\n    setError(\"\");\n    setSearching(false);\n    setSubmitting(false);\n\n    // Verify side\n    setVerifyConfNumber(\"\");\n    setVerifyResult({ rsvps: [] });\n    setVerifying(false);\n    setEditIndex(null);\n    setModifiedCount(\"\");\n    setUpdateMessage(null);\n    setUpdateError(null);\n  };\n\n  const handleTabChange = (tab) => {\n    if (tab === \"home\") {\n      resetAll();\n    }\n    setActiveTab(tab);\n  };\n  // ------------------------------------------------------------\n\n  // Load open events once\n  useEffect(() => {\n    (async () => {\n      setLoadingEvents(true);\n      try {\n        console.log(\"Loading open events...\");\n        const data = await getOpenEvents();\n        setEvents(Array.isArray(data) ? data : []);\n        console.log(\"Open events loaded:\", Array.isArray(data) ? data.length : 0);\n      } catch (err) {\n        console.error(\"Failed to load open events:\", err);\n        setError(\"Failed to load open events.\");\n      } finally {\n        setLoadingEvents(false);\n      }\n    })();\n  }, []);\n\n  // -------- Submit handlers --------\n  const handleSearch = async (e) => {\n    e.preventDefault();\n    setError(\"\");\n    setMember(null);\n    if (searchMode !== \"memberId\" && searchMode !== \"nameHouse\") {\n      setError(\"Choose a search mode first.\");\n      return;\n    }\n    if (searchMode === \"memberId\" && !memberId.trim()) {\n      setError(\"Member ID is required.\");\n      return;\n    }\n    if (searchMode === \"nameHouse\" && (!name.trim() || !houseNumber.trim())) {\n      setError(\"Name and House # are required.\");\n      return;\n    }\n\n    setSearching(true);\n    try {\n      const payload =\n        searchMode === \"memberId\"\n          ? { memberId: memberId.trim() }\n          : { name: name.trim(), houseNumber: houseNumber.trim() };\n\n      console.log(\"Searching member with payload:\", payload);\n      const result = await searchMember(payload);\n      console.log(\"Search result:\", result);\n      if (result && result.name) {\n        setMember(result);\n      } else {\n        setError(\"Member not found.\");\n      }\n    } catch (err) {\n      console.error(\"Error searching member:\", err);\n      setError(err.message || \"Error searching member.\");\n    } finally {\n      setSearching(false);\n    }\n  };\n\n  const toggleEventSelection = (eventId, checked) => {\n    setSelectedEvents((prev) => {\n      const copy = { ...prev };\n      if (checked) copy[eventId] = copy[eventId] ?? 1;\n      else delete copy[eventId];\n      return copy;\n    });\n  };\n\n  const updateEventCount = (eventId, value) => {\n    setSelectedEvents((prev) => ({\n      ...prev,\n      [eventId]: value ? parseInt(value, 10) : 0,\n    }));\n  };\n\n  const hasValidSelection = () => {\n    // at least one event selected & count > 0 (you already used this rule)\n    return Object.keys(selectedEvents).some((k) => {\n      const v = Number(selectedEvents[k] || rsvpCount);\n      return !isNaN(v) && v > 0;\n    });\n  };\n\n  const handleSubmitRSVP = async (e) => {\n    e.preventDefault();\n    setError(\"\");\n    setConfirmation(null);\n    setSubmitMessage(null);\n\n    // Validation\n    if (isLifeMember === \"yes\" && !member) {\n      setError(\"Please search and select a member first.\");\n      return;\n    }\n    if (!hasValidSelection()) {\n      setError(\"Please select at least one event and give it an RSVP count (>0).\");\n      return;\n    }\n\n    // Non-member email check\n    if (isLifeMember === \"no\" && !nonMemberEmail.trim()) {\n      setError(\"Please enter an email address.\");\n      return;\n    }\n\n    // Member email check\n    if (isLifeMember === \"yes\" && !email.trim()) {\n      setError(\"Please enter an email address.\");\n      return;\n    }\n\n    const confNumber = Math.floor(100000 + Math.random() * 900000).toString();\n\n    // Build events array\n    const eventsPayload = events\n      .map((ev, idx) =>\n        selectedEvents[idx] !== undefined && Number(rsvpCount) >= 0\n          ? {\n            programname: ev.programname,\n            eventname: ev.eventname,\n            eventday: ev.eventday,\n            eventdate: ev.eventdate,\n            rsvpcount: Number(rsvpCount),\n          }\n          : null\n      )\n      .filter(Boolean);\n\n    // Pick correct fields depending on member vs non-member\n    const payload =\n      isLifeMember === \"yes\"\n        ? {\n          memname: member?.name || \"\",\n          memaddress: member?.address || \"\",\n          memphonenumber: member?.phone || \"\",\n          mememail: email.trim(),\n          rsvpconfnumber: confNumber,\n          events: eventsPayload,\n        }\n        : {\n          memname: nonMemberName,\n          memaddress: nonMemberAddress,\n          memphonenumber: nonMemberPhone,\n          mememail: nonMemberEmail.trim(),\n          rsvpconfnumber: confNumber,\n          events: eventsPayload,\n        };\n\n    console.log(\"Submitting RSVP Payload:\", payload);\n\n    setSubmitting(true);\n    try {\n      const res = await submitRSVP(payload);\n      console.log(\"Submit response:\", res);\n      setConfirmation({ confNumber, ...res });\n      setSubmitMessage(\"RSVP submitted successfully!\");\n      setSubmitSuccess(true);\n\n      // Reset after delay\n      setTimeout(() => {\n        setSubmitMessage(null);\n        setSubmitSuccess(false);\n        setConfirmation(null);\n        setMember(null);\n        setSelectedEvents({});\n        setEmail(\"\");\n        setNonMemberName(\"\");\n        setNonMemberAddress(\"\");\n        setNonMemberPhone(\"\");\n        setNonMemberEmail(\"\");\n        setIsLifeMember(null);\n        setSearchMode(\"\");\n        setMemberId(\"\");\n        setName(\"\");\n        setHouseNumber(\"\");\n        setRsvpCount(\"\");\n        setActiveTab(\"home\");\n      }, 15000);\n    } catch (err) {\n      console.error(\"Error submitting RSVP:\", err);\n      setSubmitMessage(\"Error submitting RSVP: \" + (err.message || \"Unknown\"));\n      setSubmitSuccess(false);\n    } finally {\n      setSubmitting(false);\n    }\n  };\n\n  // =========== Working 091425 =======12:30am ==========\n  const WorkinghandleSubmitRSVP = async (e) => {\n    e.preventDefault();\n    setError(\"\");\n    setConfirmation(null);\n    setSubmitMessage(null);\n\n    // If non-member workflow, member may be null but we still want to use the manual fields.\n    // Your request was to keep variable names; so the NonMemberRSVP component should set `member` or we will\n    // send the manual fields as memname/memaddress/etc in payload. For the member flow below, member is required.\n    if (isLifeMember === \"yes\" && !member) {\n      setError(\"Please search and select a member first.\");\n      return;\n    }\n    if (!hasValidSelection()) {\n      setError(\"Please select at least one event and give it an RSVP count (>0).\");\n      return;\n    }\n    if (!email.trim()) {\n      setError(\"Please enter an email address.\");\n      return;\n    }\n\n    const confNumber = Math.floor(100000 + Math.random() * 900000).toString();\n\n    // Build events array using selectedEvents (same behavior as before)\n    const eventsPayload = events\n      .map((ev, idx) =>\n        selectedEvents[idx] !== undefined && Number(rsvpCount) >= 0\n          ? {\n            programname: ev.programname,\n            eventname: ev.eventname,\n            eventday: ev.eventday,\n            eventdate: ev.eventdate,\n            rsvpcount: Number(rsvpCount),\n          }\n          : null\n      )\n      .filter(Boolean);\n\n    // If member flow, use member fields; if non-member flow, we expect NonMemberRSVP to set `member` object\n    // or provide manual fields via top-level variables. To keep compatibility, we prefer:\n    // - if member exists -> use member fields\n    // - else expect manual fields are in name/houseNumber/email etc and use them\n    const memName = member ? member.name : name;\n    const memAddress = member ? member.address : houseNumber; // if you store address in a different var, adjust accordingly\n    const memPhone = member ? member.phone : \"\"; // NonMemberRSVP should set a top-level state for phone if needed\n\n    // Build unified payload\n    const payload = {\n      memname: memName,\n      memaddress: memAddress,\n      memphonenumber: memPhone,\n      mememail: email.trim(),\n      rsvpconfnumber: confNumber,\n      events: eventsPayload,\n    };\n\n    console.log(\"Submitting RSVP Payload:\", payload);\n\n    setSubmitting(true);\n    try {\n      const res = await submitRSVP(payload);\n      console.log(\"Submit response:\", res);\n      setConfirmation({ confNumber, ...res });\n      setSubmitMessage(\"RSVP submitted successfully!\");\n      setSubmitSuccess(true);\n\n      // keep success message visible then clear (as you requested previously)\n      setTimeout(() => {\n        // Reset all submit tab states\n        setSubmitMessage(null);\n        setSubmitSuccess(false);\n        setConfirmation(null);\n        setMember(null);\n        setSelectedEvents({});\n        setEmail(\"\");\n        setIsLifeMember(null);\n        setSearchMode(\"\");\n        setMemberId(\"\");\n        setName(\"\");\n        setHouseNumber(\"\");\n        setRsvpCount(\"\");\n\n        // Switch to Home\n        setActiveTab(\"home\");\n      }, 15000);\n    } catch (err) {\n      console.error(\"Error submitting RSVP:\", err);\n      setSubmitMessage(\"Error submitting RSVP: \" + (err.message || \"Unknown\"));\n      setSubmitSuccess(false);\n    } finally {\n      setSubmitting(false);\n    }\n  };\n\n  // -------- Verify handlers --------\n  const handleVerifyRSVP = async (e) => {\n    if (e && e.preventDefault) e.preventDefault();\n    setError(\"\");\n    setVerifyResult({ rsvps: [] });\n    setUpdateMessage(null);\n    setUpdateError(null);\n    if (!verifyConfNumber.trim()) {\n      setError(\"Confirmation number is required.\");\n      return;\n    }\n\n    setVerifying(true);\n    try {\n      console.log(\"Calling verifyRSVP for:\", verifyConfNumber.trim());\n      const data = await verifyRSVP(verifyConfNumber.trim());\n      console.log(\"Verify response:\", data);\n      // normalize shape: ensure object with rsvps array\n      const normalized = data && Array.isArray(data.rsvps) ? data : { rsvps: [] };\n      setVerifyResult(normalized);\n    } catch (err) {\n      console.error(\"Error verifying RSVP:\", err);\n      setError(err.response?.data?.message || err.message || \"Error verifying RSVP.\");\n    } finally {\n      setVerifying(false);\n      setEditIndex(null);\n      setModifiedCount(\"\");\n    }\n  };\n\n  const handleUpdateRSVP = async (rsvpId, newCount) => {\n    try {\n      console.log(\"🔧 Sending update for RSVP:\", rsvpId, \"→\", newCount);\n      const result = await updateRSVP(rsvpId, parseInt(newCount, 10));\n      console.log(\"✅ RSVP updated:\", result);\n\n      const successMsg = \"RSVP updated successfully!\";\n\n      // Refresh verify results\n      await handleVerifyRSVP({ preventDefault: () => { } });\n      setEditIndex(null);\n\n      // Show success AFTER refresh\n      setUpdateMessage(successMsg);\n      setUpdateError(null);\n\n      // After 15s clear everything and return to Home\n      setTimeout(() => {\n        setVerifyConfNumber(\"\");\n        setVerifyResult({ rsvps: [] });\n        setEditIndex(null);\n        setModifiedCount(\"\");\n        setUpdateMessage(null);\n        setActiveTab(\"home\");\n      }, 15000);\n    } catch (err) {\n      console.error(\"❌ Error updating RSVP:\", err);\n      setUpdateError(err.message || \"Error updating RSVP.\");\n      setUpdateMessage(null);\n\n      setTimeout(() => setUpdateError(null), 5000);\n    }\n  };\n\n  // Helper to extract member info from verifyResult.rsvps (first doc)\n  const verifyMemberFromResult = () => {\n    const arr = verifyResult?.rsvps ?? [];\n    if (!Array.isArray(arr) || arr.length === 0) return null;\n    const first = arr[0];\n    return {\n      name: first.memname || \"\",\n      address: first.memaddress || \"\",\n      phone: first.memphonenumber || \"\",\n      email: first.mememail || \"\",\n    };\n  };\n\n  // Utility to format YYYY-MM-DD → MM/DD/YYYY\n  const displayDate = (dateStr) => {\n    if (!dateStr) return \"\";\n    const [year, month, day] = dateStr.split(\"-\");\n    return `${month}/${day}/${year}`;\n  };\n\n  // -------- UI --------\n  return (\n    <div className=\"page-wrapper\">\n      <div className=\"rsvp-container\">\n        {/* ✅ Logo at the top */}\n        <div className=\"logo-wrapper\">\n          <img src={logo} alt=\"JSMC Logo\" className=\"rsvp-logo\" />\n        </div>\n        {error && <div className=\"error-message\">{error}</div>}\n        {/* HOME */}\n        {activeTab === \"home\" && (\n          <div className=\"home\">\n            <h4>Welcome to JSMC RSVP Home</h4>\n\n            {/* Open Events Table */}\n            <div className=\"result-table-wrapper\" style={{ marginTop: \"10px\" }}>\n              <h4>Current open events to Submit or View/Modify RSVP</h4>\n\n              {Array.isArray(events) && events.length > 0 ? (\n                <table className=\"result-table\" style={{ marginBottom: \"20px\" }}>\n                  <thead>\n                    <tr>\n                      <th>Program</th>\n                      <th>Event Name</th>\n                      <th>Event Date</th>\n                      <th>RSVP By</th>\n                    </tr>\n                  </thead>\n                  <tbody>\n                    {events.map((ev, idx) => {\n                      // Check if this is the first event for this program\n                      const isFirst = idx === 0 || ev.programname !== events[idx - 1].programname;\n                      // Count how many events belong to this program\n                      const programCount = events.filter((e) => e.programname === ev.programname).length;\n\n                      return (\n                        <tr key={ev._id || idx}>\n                          {isFirst && <td rowSpan={programCount}>{ev.programname}</td>}\n                          <td>{ev.eventname}</td>\n                          <td>{ev.eventday}, {displayDate(ev.eventdate)}</td>\n                          <td>{displayDate(ev.closersvp)}</td>\n                        </tr>\n                      );\n                    })}\n                  </tbody>\n                </table>\n              ) : (\n                <p style={{ fontStyle: \"italic\", color: \"#666\" }}>\n                  No open events available at this time.\n                </p>\n              )}\n            </div>\n\n            <h4>Please select Submit RSVP or Verify/Modify RSVP</h4>\n          </div>\n        )}\n\n        {/* Tabs */}\n        <div className=\"tab-header\">\n          {activeTab !== \"home\" && (\n            <button className=\"tab\" onClick={() => handleTabChange(\"home\")}>\n              Home\n            </button>\n          )}\n          {activeTab !== \"submit\" && (\n            <button className=\"tab\" onClick={() => handleTabChange(\"submit\")}>\n              Submit RSVP\n            </button>\n          )}\n          {activeTab !== \"verify\" && (\n            <button className=\"tab\" onClick={() => handleTabChange(\"verify\")}>\n              Verify / Modify RSVP\n            </button>\n          )}\n        </div>\n\n        {/* Tabs\n        <div className=\"tab-header\">\n          <button className={activeTab === \"home\" ? \"tab active\" : \"tab\"} onClick={() => handleTabChange(\"home\")}>\n            Home\n          </button>\n          <button className={activeTab === \"submit\" ? \"tab active\" : \"tab\"} onClick={() => handleTabChange(\"submit\")}>\n            Submit RSVP\n          </button>\n          <button className={activeTab === \"verify\" ? \"tab active\" : \"tab\"} onClick={() => handleTabChange(\"verify\")}>\n            Verify / Modify RSVP\n          </button>\n        </div>*/}\n\n        {/* SUBMIT */}\n        {activeTab === \"submit\" && (\n          <>\n            {isLifeMember === null && (\n              <div className=\"form-section\">\n                <h3>Are you JSMC Life Member?</h3>\n                <label>\n                  <input type=\"radio\" name=\"lifeMember\" value=\"yes\" onChange={() => setIsLifeMember(\"yes\")} /> Yes\n                </label>\n                <label style={{ marginLeft: \"1rem\" }}>\n                  <input type=\"radio\" name=\"lifeMember\" value=\"no\" onChange={() => setIsLifeMember(\"no\")} /> No\n                </label>\n              </div>\n            )}\n\n            {/* Non-member flow: render NonMemberRSVP component */}\n            {isLifeMember === \"no\" && (\n              <NonMemberRSVP\n                events={events}\n                displayDate={displayDate}\n                toggleEventSelection={toggleEventSelection}\n                selectedEvents={selectedEvents}\n                rsvpCount={rsvpCount}\n                setRsvpCount={setRsvpCount}\n                nonMemberName={nonMemberName}\n                setNonMemberName={setNonMemberName}\n                nonMemberAddress={nonMemberAddress}\n                setNonMemberAddress={setNonMemberAddress}\n                nonMemberPhone={nonMemberPhone}\n                setNonMemberPhone={setNonMemberPhone}\n                nonMemberEmail={nonMemberEmail}\n                setNonMemberEmail={setNonMemberEmail}\n                handleSubmitRSVP={handleSubmitRSVP}\n                submitting={submitting}\n              />\n            )}\n\n            {/* Member search UI (keeps your existing search behavior) */}\n            {isLifeMember === \"yes\" && !member && (\n              <form className=\"search-form\" onSubmit={handleSearch}>\n                <h4>Retrieve membership using</h4>\n\n                <div className=\"form-row\">\n                  <label>\n                    <input\n                      type=\"radio\"\n                      value=\"memberId\"\n                      checked={searchMode === \"memberId\"}\n                      onChange={() => setSearchMode(\"memberId\")}\n                    />\n                    Member ID\n                  </label>\n                  <label style={{ marginLeft: \"1rem\" }}> OR </label>\n                  <label style={{ marginLeft: \"1rem\" }}>\n                    <input\n                      type=\"radio\"\n                      value=\"nameHouse\"\n                      checked={searchMode === \"nameHouse\"}\n                      onChange={() => setSearchMode(\"nameHouse\")}\n                    />\n                    First Name &amp; House #\n                  </label>\n                </div>\n\n                {/* ---- Member ID Search ---- */}\n                {searchMode === \"memberId\" && (\n                  <div className=\"inline-fields\">\n                    <input\n                      className=\"small-input\"\n                      type=\"number\"\n                      value={memberId}\n                      onChange={(e) => setMemberId(e.target.value)}\n                      placeholder=\"Enter Member ID\"\n                    />\n                    <button\n                      className=\"button\"\n                      type=\"submit\"\n                      disabled={searching || memberId.trim() === \"\"}\n                      style={{\n                        backgroundColor:\n                          searching || memberId.trim() === \"\" ? \"lightgray\" : \"#007bff\",\n                        color: searching || memberId.trim() === \"\" ? \"#666\" : \"white\",\n                        cursor:\n                          searching || memberId.trim() === \"\" ? \"not-allowed\" : \"pointer\",\n                      }}\n                    >\n                      {searching ? \"Searching...\" : \"Search\"}\n                    </button>\n                  </div>\n                )}\n\n                {/* ---- Name + House Search ---- */}\n                {searchMode === \"nameHouse\" && (\n                  <div className=\"inline-fields\">\n                    <input\n                      className=\"small-input\"\n                      type=\"text\"\n                      value={name}\n                      onChange={(e) => setName(e.target.value)}\n                      placeholder=\"First Name\"\n                    />\n                    <span className=\"inline-label\">House #</span>\n                    <input\n                      className=\"small-input\"\n                      type=\"text\"\n                      value={houseNumber}\n                      onChange={(e) => setHouseNumber(e.target.value)}\n                      placeholder=\"e.g. 123\"\n                    />\n                    <button\n                      className=\"button\"\n                      type=\"submit\"\n                      disabled={\n                        searching || name.trim() === \"\" || houseNumber.trim() === \"\"\n                      }\n                      style={{\n                        backgroundColor:\n                          searching || name.trim() === \"\" || houseNumber.trim() === \"\"\n                            ? \"lightgray\"\n                            : \"#007bff\",\n                        color:\n                          searching || name.trim() === \"\" || houseNumber.trim() === \"\"\n                            ? \"#666\"\n                            : \"white\",\n                        cursor:\n                          searching || name.trim() === \"\" || houseNumber.trim() === \"\"\n                            ? \"not-allowed\"\n                            : \"pointer\",\n                      }}\n                    >\n                      {searching ? \"Searching...\" : \"Search\"}\n                    </button>\n                  </div>\n                )}\n              </form>\n            )}\n\n            {/* Member found: render MemberRSVP component (keeps your RSVP UI) */}\n            {member && (\n              <MemberRSVP\n                events={events}\n                displayDate={displayDate}\n                toggleEventSelection={toggleEventSelection}\n                selectedEvents={selectedEvents}\n                rsvpCount={rsvpCount}\n                setRsvpCount={setRsvpCount}\n                email={email}\n                setEmail={setEmail}\n                member={member}\n                setMember={setMember}\n                handleSubmitRSVP={handleSubmitRSVP}\n                submitting={submitting}\n                submitMessage={submitMessage}\n                submitSuccess={submitSuccess}\n              />\n            )}\n\n            {/* Success / error messages at bottom */}\n            {submitSuccess && submitMessage && (\n              <div style={{ color: \"green\", marginTop: \"10px\" }}>\n                ✅ {submitMessage}\n                {confirmation && (\n                  <div>Confirmation #: {confirmation.confNumber || confirmation?.confNumber}</div>\n                )}\n              </div>\n            )}\n\n            {!submitSuccess && submitMessage && (\n              <div style={{ color: \"red\", marginTop: \"10px\" }}>\n                ❌ {submitMessage}\n              </div>\n            )}\n          </>\n        )}\n\n        {/* VERIFY */}\n        {activeTab === \"verify\" && <VerifyRSVP />}\n      </div>\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}