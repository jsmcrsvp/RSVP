{"ast":null,"code":"// frontend/src/pages/NonMemberRSVP.js\nimport React,{useState,useEffect}from\"react\";import{getOpenEvents,submitRSVP}from\"../api\";import\"../styles/SubmitRSVP.css\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function NonMemberRSVP(_ref){let{onHome}=_ref;const[name,setName]=useState(\"\");const[address,setAddress]=useState(\"\");const[phone,setPhone]=useState(\"\");const[email,setEmail]=useState(\"\");const[events,setEvents]=useState([]);const[loading,setLoading]=useState(false);const[submitted,setSubmitted]=useState(false);const[message,setMessage]=useState(\"\");useEffect(()=>{const loadEvents=async()=>{try{const data=await getOpenEvents();setEvents(data||[]);}catch(err){console.error(\"Error loading events:\",err);}};loadEvents();},[]);const handleSubmit=async e=>{e.preventDefault();setLoading(true);setMessage(\"\");try{await submitRSVP({name,address,phone,email,rsvpEntries:events.map(ev=>({eventId:ev._id,rsvpcount:ev.rsvpcount||0}))});setSubmitted(true);setMessage(\"RSVP submitted successfully!\");}catch(err){setMessage(\"Error submitting RSVP.\");}finally{setLoading(false);}};return/*#__PURE__*/_jsxs(\"form\",{className:\"rsvp-form\",onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Non-Member RSVP\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"inline-fields\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Full Name\",value:name,onChange:e=>setName(e.target.value),required:true}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Address\",value:address,onChange:e=>setAddress(e.target.value),required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"inline-fields\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Phone Number\",value:phone,onChange:e=>setPhone(e.target.value),required:true}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",placeholder:\"Email Address\",value:email,onChange:e=>setEmail(e.target.value),required:true})]}),/*#__PURE__*/_jsx(\"h4\",{children:\"Open Events\"}),events.length>0?/*#__PURE__*/_jsxs(\"table\",{className:\"result-table\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Program\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Event\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Date\"}),/*#__PURE__*/_jsx(\"th\",{children:\"RSVP\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:events.map((ev,idx)=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:ev.programname}),/*#__PURE__*/_jsx(\"td\",{children:ev.eventname}),/*#__PURE__*/_jsxs(\"td\",{children:[ev.eventday,\", \",ev.eventdate]}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"input\",{type:\"number\",min:\"0\",value:ev.rsvpcount||0,onChange:e=>{const newEvents=[...events];newEvents[idx].rsvpcount=e.target.value;setEvents(newEvents);}})})]},ev._id||idx))})]}):/*#__PURE__*/_jsx(\"p\",{children:\"No open events.\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-actions\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"button\",type:\"submit\",disabled:loading,children:loading?\"Submitting...\":\"Submit RSVP\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:onHome,children:\"Home\"})]}),submitted&&/*#__PURE__*/_jsx(\"div\",{className:\"success-message\",children:message}),!submitted&&message&&/*#__PURE__*/_jsx(\"div\",{className:\"error-message\",children:message})]});}","map":{"version":3,"names":["React","useState","useEffect","getOpenEvents","submitRSVP","jsx","_jsx","jsxs","_jsxs","NonMemberRSVP","_ref","onHome","name","setName","address","setAddress","phone","setPhone","email","setEmail","events","setEvents","loading","setLoading","submitted","setSubmitted","message","setMessage","loadEvents","data","err","console","error","handleSubmit","e","preventDefault","rsvpEntries","map","ev","eventId","_id","rsvpcount","className","onSubmit","children","type","placeholder","value","onChange","target","required","length","idx","programname","eventname","eventday","eventdate","min","newEvents","disabled","onClick"],"sources":["/Users/tejas.shah/Downloads/jsmcrsvp/src/components/NonMemberRSVP.js"],"sourcesContent":["// frontend/src/pages/NonMemberRSVP.js\nimport React, { useState, useEffect } from \"react\";\nimport { getOpenEvents, submitRSVP } from \"../api\";\nimport \"../styles/SubmitRSVP.css\";\n\nexport default function NonMemberRSVP({ onHome }) {\n  const [name, setName] = useState(\"\");\n  const [address, setAddress] = useState(\"\");\n  const [phone, setPhone] = useState(\"\");\n  const [email, setEmail] = useState(\"\");\n  const [events, setEvents] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [submitted, setSubmitted] = useState(false);\n  const [message, setMessage] = useState(\"\");\n\n  useEffect(() => {\n    const loadEvents = async () => {\n      try {\n        const data = await getOpenEvents();\n        setEvents(data || []);\n      } catch (err) {\n        console.error(\"Error loading events:\", err);\n      }\n    };\n    loadEvents();\n  }, []);\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    setLoading(true);\n    setMessage(\"\");\n\n    try {\n      await submitRSVP({\n        name,\n        address,\n        phone,\n        email,\n        rsvpEntries: events.map((ev) => ({\n          eventId: ev._id,\n          rsvpcount: ev.rsvpcount || 0,\n        })),\n      });\n\n      setSubmitted(true);\n      setMessage(\"RSVP submitted successfully!\");\n    } catch (err) {\n      setMessage(\"Error submitting RSVP.\");\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <form className=\"rsvp-form\" onSubmit={handleSubmit}>\n      <h3>Non-Member RSVP</h3>\n      <div className=\"inline-fields\">\n        <input\n          type=\"text\"\n          placeholder=\"Full Name\"\n          value={name}\n          onChange={(e) => setName(e.target.value)}\n          required\n        />\n        <input\n          type=\"text\"\n          placeholder=\"Address\"\n          value={address}\n          onChange={(e) => setAddress(e.target.value)}\n          required\n        />\n      </div>\n      <div className=\"inline-fields\">\n        <input\n          type=\"text\"\n          placeholder=\"Phone Number\"\n          value={phone}\n          onChange={(e) => setPhone(e.target.value)}\n          required\n        />\n        <input\n          type=\"email\"\n          placeholder=\"Email Address\"\n          value={email}\n          onChange={(e) => setEmail(e.target.value)}\n          required\n        />\n      </div>\n\n      <h4>Open Events</h4>\n      {events.length > 0 ? (\n        <table className=\"result-table\">\n          <thead>\n            <tr>\n              <th>Program</th>\n              <th>Event</th>\n              <th>Date</th>\n              <th>RSVP</th>\n            </tr>\n          </thead>\n          <tbody>\n            {events.map((ev, idx) => (\n              <tr key={ev._id || idx}>\n                <td>{ev.programname}</td>\n                <td>{ev.eventname}</td>\n                <td>{ev.eventday}, {ev.eventdate}</td>\n                <td>\n                  <input\n                    type=\"number\"\n                    min=\"0\"\n                    value={ev.rsvpcount || 0}\n                    onChange={(e) => {\n                      const newEvents = [...events];\n                      newEvents[idx].rsvpcount = e.target.value;\n                      setEvents(newEvents);\n                    }}\n                  />\n                </td>\n              </tr>\n            ))}\n          </tbody>\n        </table>\n      ) : (\n        <p>No open events.</p>\n      )}\n\n      <div className=\"form-actions\">\n        <button className=\"button\" type=\"submit\" disabled={loading}>\n          {loading ? \"Submitting...\" : \"Submit RSVP\"}\n        </button>\n        <button type=\"button\" onClick={onHome}>\n          Home\n        </button>\n      </div>\n\n      {submitted && <div className=\"success-message\">{message}</div>}\n      {!submitted && message && <div className=\"error-message\">{message}</div>}\n    </form>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}